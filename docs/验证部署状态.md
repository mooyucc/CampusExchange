# ✅ 验证部署状态

## 当前状态
- ✅ 部署完成（1分钟前）
- ✅ 状态：Ready
- ❌ 仍然显示应用错误

## 排查步骤

### 步骤 1：确认环境变量已添加

在 `campus-exchange` 项目中，检查 Environment Variables：

**必须有的三个变量：**
1. ✅ `DATABASE_URL` - 数据库连接字符串
2. ✅ `NEXTAUTH_SECRET` - NextAuth 密钥
3. ✅ `NEXTAUTH_URL` - 必须设置为 `https://campus-exchange-theta.vercel.app`

**检查方法：**
- 进入 Settings → Environment Variables
- 确认三个变量都存在
- 确认 `NEXTAUTH_URL` 的值完全匹配您的域名

### 步骤 2：查看 Runtime Logs

1. 在部署详情页面，点击 **Runtime Logs** 卡片
2. 或者点击顶部的 **Logs** 标签
3. 查看最新的错误信息
4. **复制完整的错误信息**

### 步骤 3：等待环境变量生效

有时候环境变量需要几分钟才能生效。如果刚添加，等待 2-3 分钟后刷新页面。

### 步骤 4：验证数据库连接

如果错误仍然存在，可能是数据库连接问题。检查：
- `DATABASE_URL` 是否使用连接池 URL（端口 6543）
- 数据库表是否已正确创建（User, Item, ExchangeRequest）

---

## 常见错误及解决方案

### 错误 1：NEXTAUTH_URL 不匹配
**症状：** "Invalid NEXTAUTH_URL"
**解决：** 确保 `NEXTAUTH_URL` 完全匹配您的域名（包括 https://）

### 错误 2：数据库连接失败
**症状：** "Can't reach database server"
**解决：** 
- 检查 `DATABASE_URL` 是否正确
- 尝试使用连接池 URL（端口 6543）

### 错误 3：表不存在
**症状：** "Table does not exist"
**解决：** 在 Supabase 中确认表已创建

---

## 快速验证清单

- [ ] 三个环境变量都已添加
- [ ] `NEXTAUTH_URL` 设置为 `https://campus-exchange-theta.vercel.app`
- [ ] 等待 2-3 分钟让环境变量生效
- [ ] 查看 Runtime Logs 获取具体错误信息
- [ ] 确认数据库表已创建

**请先查看 Runtime Logs，告诉我具体的错误信息！**

